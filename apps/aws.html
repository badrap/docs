<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Amazon Web Services (AWS) | Badrap docs</title>
    <meta name="generator" content="VuePress 1.5.3">
    
    <meta name="description" content="Badrap documentation site">
    <link rel="preload" href="/assets/css/0.styles.75b7dee1.css" as="style"><link rel="preload" href="/assets/js/app.f882b083.js" as="script"><link rel="preload" href="/assets/js/2.2f4adc62.js" as="script"><link rel="preload" href="/assets/js/6.2dde164f.js" as="script"><link rel="prefetch" href="/assets/js/10.7f831b4e.js"><link rel="prefetch" href="/assets/js/11.13fef621.js"><link rel="prefetch" href="/assets/js/12.f521fe94.js"><link rel="prefetch" href="/assets/js/13.879940cb.js"><link rel="prefetch" href="/assets/js/14.622fc995.js"><link rel="prefetch" href="/assets/js/15.d0d16321.js"><link rel="prefetch" href="/assets/js/16.39673ba6.js"><link rel="prefetch" href="/assets/js/17.f8bb1016.js"><link rel="prefetch" href="/assets/js/18.04172768.js"><link rel="prefetch" href="/assets/js/19.4956421f.js"><link rel="prefetch" href="/assets/js/20.1fa4344b.js"><link rel="prefetch" href="/assets/js/21.5c6a910a.js"><link rel="prefetch" href="/assets/js/22.88b5a4c1.js"><link rel="prefetch" href="/assets/js/23.9d691000.js"><link rel="prefetch" href="/assets/js/24.9100c6ef.js"><link rel="prefetch" href="/assets/js/25.c24f2874.js"><link rel="prefetch" href="/assets/js/26.dcd6e080.js"><link rel="prefetch" href="/assets/js/27.b25a13e5.js"><link rel="prefetch" href="/assets/js/28.33b061fa.js"><link rel="prefetch" href="/assets/js/29.b953c29a.js"><link rel="prefetch" href="/assets/js/3.932843fc.js"><link rel="prefetch" href="/assets/js/30.9c3ac369.js"><link rel="prefetch" href="/assets/js/31.50d236f5.js"><link rel="prefetch" href="/assets/js/32.d6b73377.js"><link rel="prefetch" href="/assets/js/33.4901d0f0.js"><link rel="prefetch" href="/assets/js/34.5b0dd3e1.js"><link rel="prefetch" href="/assets/js/35.1356334b.js"><link rel="prefetch" href="/assets/js/36.fb9679d1.js"><link rel="prefetch" href="/assets/js/37.d709e137.js"><link rel="prefetch" href="/assets/js/38.cb35d713.js"><link rel="prefetch" href="/assets/js/39.65f88c00.js"><link rel="prefetch" href="/assets/js/4.76ee9e74.js"><link rel="prefetch" href="/assets/js/40.5f209a34.js"><link rel="prefetch" href="/assets/js/41.90df8a4a.js"><link rel="prefetch" href="/assets/js/42.18cb6cb8.js"><link rel="prefetch" href="/assets/js/43.dc7dfa4f.js"><link rel="prefetch" href="/assets/js/44.218ff650.js"><link rel="prefetch" href="/assets/js/45.3d821467.js"><link rel="prefetch" href="/assets/js/46.c93e5692.js"><link rel="prefetch" href="/assets/js/47.247857cd.js"><link rel="prefetch" href="/assets/js/48.40a4e22e.js"><link rel="prefetch" href="/assets/js/49.19422e26.js"><link rel="prefetch" href="/assets/js/5.52cc2df0.js"><link rel="prefetch" href="/assets/js/50.77fad04f.js"><link rel="prefetch" href="/assets/js/51.6c797e18.js"><link rel="prefetch" href="/assets/js/52.093eac42.js"><link rel="prefetch" href="/assets/js/53.6348ef16.js"><link rel="prefetch" href="/assets/js/54.9d7d41e0.js"><link rel="prefetch" href="/assets/js/55.1bcf12bf.js"><link rel="prefetch" href="/assets/js/56.293b2b8d.js"><link rel="prefetch" href="/assets/js/57.b7ddca4a.js"><link rel="prefetch" href="/assets/js/58.34a2fdb0.js"><link rel="prefetch" href="/assets/js/59.f44a484d.js"><link rel="prefetch" href="/assets/js/60.51023ba8.js"><link rel="prefetch" href="/assets/js/61.7f69288d.js"><link rel="prefetch" href="/assets/js/62.d334a438.js"><link rel="prefetch" href="/assets/js/63.03cff6aa.js"><link rel="prefetch" href="/assets/js/7.7c9f062f.js"><link rel="prefetch" href="/assets/js/8.fb722213.js"><link rel="prefetch" href="/assets/js/9.06b4234f.js">
    <link rel="stylesheet" href="/assets/css/0.styles.75b7dee1.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><img src="/badrap-logo.png" alt="Badrap docs" class="logo"> <span class="site-name can-hide">Badrap docs</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="https://badrap.io" target="_blank" rel="noopener noreferrer" class="nav-link external">
  badrap.io
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Select language" class="dropdown-title"><span class="title">Languages</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/apps/aws.html" aria-current="page" class="nav-link router-link-exact-active router-link-active">
  English
</a></li><li class="dropdown-item"><!----> <a href="/fi/" class="nav-link">
  Suomi
</a></li></ul></div></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="https://badrap.io" target="_blank" rel="noopener noreferrer" class="nav-link external">
  badrap.io
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Select language" class="dropdown-title"><span class="title">Languages</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/apps/aws.html" aria-current="page" class="nav-link router-link-exact-active router-link-active">
  English
</a></li><li class="dropdown-item"><!----> <a href="/fi/" class="nav-link">
  Suomi
</a></li></ul></div></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>Amazon Web Services (AWS)</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/apps/aws.html#install-the-app" class="sidebar-link">Install the App</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/apps/aws.html#create-required-aws-role-policy" class="sidebar-link">Create Required AWS Role &amp; Policy</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/apps/aws.html#finish-the-installation" class="sidebar-link">Finish the Installation</a><ul class="sidebar-sub-headers"></ul></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="amazon-web-services-aws"><a href="#amazon-web-services-aws" class="header-anchor">#</a> Amazon Web Services (AWS)</h1> <p>This app allows you to synchronize your AWS assets into Badrap and receive security notifications about them. The app needs to be installed and enabled under your Badrap user account to get started. The app fetches a list of your organization's public IP-addresses from your AWS installation with your consent, and adds those assets under your Badrap user account. Below, we describe the actions needed in Badrap. We also explain what you need to do in AWS to grant the minimum permissions for Badrap to fetch the pubic IP-addresses.</p> <h2 id="install-the-app"><a href="#install-the-app" class="header-anchor">#</a> Install the App</h2> <ol><li>Open the <a href="https://badrap.io/apps/aws" target="_blank" rel="noopener noreferrer">AWS app page<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>.</li> <li>Install the app.</li> <li>Take note of the External ID value that the app has generated for you. You'll need this later.</li></ol> <p><img src="/assets/img/aws-external-id.a2a3be74.jpg" alt="External Id"></p> <h2 id="create-required-aws-role-policy"><a href="#create-required-aws-role-policy" class="header-anchor">#</a> Create Required AWS Role &amp; Policy</h2> <p>Setting up the Badrap app with Amazon Web Services requires configuring role delegation using AWS IAM.</p> <ol><li><p>Create a new role in the <a href="https://console.aws.amazon.com/iam/home#/roles" target="_blank" rel="noopener noreferrer">AWS IAM console.<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p></li> <li><p>Select <code>Another AWS account</code> for the role type.</p></li> <li><p>Enter <code>808384617942</code> (Badrap's Account ID) as the <code>Account ID</code>.
<img src="/assets/img/aws-another-aws-account.827e6c8e.jpg" alt="Another AWS Acocount"></p></li> <li><p>Check the <code>Require external ID</code> option, and enter the External ID that the app generated for you earlier as the <code>External ID</code>.</p></li> <li><p>Leave the <code>Require MFA</code> option unchecked.</p></li> <li><p>Click <code>Next: Permissions</code>.
<img src="/assets/img/aws-external-id2.86d140cc.jpg" alt="External Id"></p></li> <li><p>If you've already created a policy, skip the following substeps. Otherwise click <code>Create Policy</code>, which opens a new window.
<img src="/assets/img/aws-create-policy.ee511b2e.jpg" alt="Create Policy"></p> <ol><li>Select the <code>JSON</code> tab and enter the following policy snippet into the text box:</li></ol> <div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">&quot;Version&quot;</span><span class="token operator">:</span> <span class="token string">&quot;2012-10-17&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;Statement&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token punctuation">{</span>
      <span class="token property">&quot;Sid&quot;</span><span class="token operator">:</span> <span class="token string">&quot;VisualEditor0&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;Effect&quot;</span><span class="token operator">:</span> <span class="token string">&quot;Allow&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;Action&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
        <span class="token string">&quot;ec2:DescribeInstances&quot;</span><span class="token punctuation">,</span>
        <span class="token string">&quot;lightsail:GetInstances&quot;</span><span class="token punctuation">,</span>
        <span class="token string">&quot;route53:GetHostedZone&quot;</span><span class="token punctuation">,</span>
        <span class="token string">&quot;route53:ListHostedZones&quot;</span><span class="token punctuation">,</span>
        <span class="token string">&quot;route53:ListResourceRecordSets&quot;</span><span class="token punctuation">,</span>
        <span class="token string">&quot;route53domains:ListDomains&quot;</span>
      <span class="token punctuation">]</span><span class="token punctuation">,</span>
      <span class="token property">&quot;Resource&quot;</span><span class="token operator">:</span> <span class="token string">&quot;*&quot;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre></div><ol start="2"><li>Click <code>Review policy</code>.</li> <li>Name the policy (e.g., <code>BadrapAppPolicy</code>).</li> <li>Click <code>Create policy</code></li> <li>Return to the <code>Create role</code> window.</li> <li>Refresh the list of policies</li></ol></li> <li><p>Select the BadrapAppPolicy
<img src="/assets/img/aws-return.e83912f5.jpg" alt="Create Policy"></p></li> <li><p>Click <code>Next: Tags</code>.</p></li> <li><p>Click <code>Next: Review</code>.</p></li> <li><p>Name the role (e.g., <code>BadrapAppRole</code>).</p></li> <li><p>Click <code>Create role</code>.</p></li></ol> <h2 id="finish-the-installation"><a href="#finish-the-installation" class="header-anchor">#</a> Finish the Installation</h2> <ol><li>Return to the <a href="https://badrap.io/apps/aws" target="_blank" rel="noopener noreferrer">AWS app page<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>.</li> <li>Enter your <a href="https://console.aws.amazon.com/billing/home?#/account" target="_blank" rel="noopener noreferrer">AWS Account ID<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> into the <code>Account ID</code> field.</li> <li>Enter the name of the AWS role you created earlier. <strong>Note that the role name is case sensitive!</strong></li> <li>Click <code>Add</code>.</li></ol></div> <footer class="page-edit"><div class="edit-link"><a href="https://github.com/badrap/docs.badrap.io/edit/master/docs/apps/aws.md" target="_blank" rel="noopener noreferrer">Edit this page on GitHub</a> <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></div> <!----></footer> <!----> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.f882b083.js" defer></script><script src="/assets/js/2.2f4adc62.js" defer></script><script src="/assets/js/6.2dde164f.js" defer></script>
  </body>
</html>
