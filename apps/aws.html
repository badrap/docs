<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Amazon Web Services (AWS) | Badrap docs</title>
    <meta name="generator" content="VuePress 1.8.2">
    
    <meta name="description" content="Badrap documentation site">
    
    <link rel="preload" href="/assets/css/0.styles.b2fdc9f3.css" as="style"><link rel="preload" href="/assets/js/app.c82b7a3e.js" as="script"><link rel="preload" href="/assets/js/2.05df0036.js" as="script"><link rel="preload" href="/assets/js/5.8ff03dbc.js" as="script"><link rel="prefetch" href="/assets/js/10.3a7cbf04.js"><link rel="prefetch" href="/assets/js/11.38f3084e.js"><link rel="prefetch" href="/assets/js/12.2fac204b.js"><link rel="prefetch" href="/assets/js/13.984fed0d.js"><link rel="prefetch" href="/assets/js/14.a25034e5.js"><link rel="prefetch" href="/assets/js/15.b463d68a.js"><link rel="prefetch" href="/assets/js/16.736eea30.js"><link rel="prefetch" href="/assets/js/17.a55158f7.js"><link rel="prefetch" href="/assets/js/18.b411bd67.js"><link rel="prefetch" href="/assets/js/19.b46938b5.js"><link rel="prefetch" href="/assets/js/20.85077b83.js"><link rel="prefetch" href="/assets/js/21.b405ad16.js"><link rel="prefetch" href="/assets/js/22.53dc9236.js"><link rel="prefetch" href="/assets/js/23.5b06aca0.js"><link rel="prefetch" href="/assets/js/24.733d22f7.js"><link rel="prefetch" href="/assets/js/25.fa8ec5f7.js"><link rel="prefetch" href="/assets/js/26.d15d7ce9.js"><link rel="prefetch" href="/assets/js/27.16d26651.js"><link rel="prefetch" href="/assets/js/28.1e755d44.js"><link rel="prefetch" href="/assets/js/29.b1180e1a.js"><link rel="prefetch" href="/assets/js/3.4d30c2dd.js"><link rel="prefetch" href="/assets/js/30.bb43159a.js"><link rel="prefetch" href="/assets/js/31.6bab14c4.js"><link rel="prefetch" href="/assets/js/32.1b43b5f3.js"><link rel="prefetch" href="/assets/js/33.a6903b80.js"><link rel="prefetch" href="/assets/js/34.fc9b9aec.js"><link rel="prefetch" href="/assets/js/35.2ef0fb18.js"><link rel="prefetch" href="/assets/js/36.ec341c5b.js"><link rel="prefetch" href="/assets/js/37.9bbecb2b.js"><link rel="prefetch" href="/assets/js/38.37d7d828.js"><link rel="prefetch" href="/assets/js/39.fa389e5c.js"><link rel="prefetch" href="/assets/js/4.19434bd7.js"><link rel="prefetch" href="/assets/js/40.b88bd520.js"><link rel="prefetch" href="/assets/js/41.a93ff4a7.js"><link rel="prefetch" href="/assets/js/42.3e8e83a4.js"><link rel="prefetch" href="/assets/js/43.610e50c9.js"><link rel="prefetch" href="/assets/js/44.7942ca11.js"><link rel="prefetch" href="/assets/js/45.6814889e.js"><link rel="prefetch" href="/assets/js/46.e8c5c686.js"><link rel="prefetch" href="/assets/js/47.74deeb71.js"><link rel="prefetch" href="/assets/js/48.2cecf6aa.js"><link rel="prefetch" href="/assets/js/49.831353db.js"><link rel="prefetch" href="/assets/js/50.ec9def06.js"><link rel="prefetch" href="/assets/js/51.ed158bbd.js"><link rel="prefetch" href="/assets/js/52.f40a4631.js"><link rel="prefetch" href="/assets/js/53.a6b9c288.js"><link rel="prefetch" href="/assets/js/54.9e0dfb08.js"><link rel="prefetch" href="/assets/js/55.c1ceb2e6.js"><link rel="prefetch" href="/assets/js/56.6b8b7540.js"><link rel="prefetch" href="/assets/js/57.e985998f.js"><link rel="prefetch" href="/assets/js/58.f45732f6.js"><link rel="prefetch" href="/assets/js/59.061a5cd3.js"><link rel="prefetch" href="/assets/js/6.22a17f96.js"><link rel="prefetch" href="/assets/js/60.139cf1fd.js"><link rel="prefetch" href="/assets/js/61.9aaf6172.js"><link rel="prefetch" href="/assets/js/62.5ab94b14.js"><link rel="prefetch" href="/assets/js/63.b604ab5a.js"><link rel="prefetch" href="/assets/js/64.cf95764c.js"><link rel="prefetch" href="/assets/js/65.31ca05a9.js"><link rel="prefetch" href="/assets/js/66.aa833651.js"><link rel="prefetch" href="/assets/js/7.c8790a08.js"><link rel="prefetch" href="/assets/js/8.504f5829.js"><link rel="prefetch" href="/assets/js/9.2c4a6732.js">
    <link rel="stylesheet" href="/assets/css/0.styles.b2fdc9f3.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><img src="/badrap-logo.png" alt="Badrap docs" class="logo"> <span class="site-name can-hide">Badrap docs</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="https://badrap.io" target="_blank" rel="noopener noreferrer" class="nav-link external">
  badrap.io
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Select language" class="dropdown-title"><span class="title">Languages</span> <span class="arrow down"></span></button> <button type="button" aria-label="Select language" class="mobile-dropdown-title"><span class="title">Languages</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/apps/aws.html" aria-current="page" class="nav-link router-link-exact-active router-link-active">
  English
</a></li><li class="dropdown-item"><!----> <a href="/fi/" class="nav-link">
  Suomi
</a></li></ul></div></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="https://badrap.io" target="_blank" rel="noopener noreferrer" class="nav-link external">
  badrap.io
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Select language" class="dropdown-title"><span class="title">Languages</span> <span class="arrow down"></span></button> <button type="button" aria-label="Select language" class="mobile-dropdown-title"><span class="title">Languages</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/apps/aws.html" aria-current="page" class="nav-link router-link-exact-active router-link-active">
  English
</a></li><li class="dropdown-item"><!----> <a href="/fi/" class="nav-link">
  Suomi
</a></li></ul></div></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>Amazon Web Services (AWS)</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/apps/aws.html#install-the-aws-app-in-badrap" class="sidebar-link">Install the AWS app in Badrap</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/apps/aws.html#create-required-aws-role-policy" class="sidebar-link">Create Required AWS Role &amp; Policy</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/apps/aws.html#finish-the-installation" class="sidebar-link">Finish the Installation</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/apps/aws.html#uninstalling-the-app" class="sidebar-link">Uninstalling the app</a><ul class="sidebar-sub-headers"></ul></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="amazon-web-services-aws"><a href="#amazon-web-services-aws" class="header-anchor">#</a> Amazon Web Services (AWS)</h1> <p>This app allows you to synchronize your AWS assets into Badrap and receive security notifications about them. The app needs to be installed and enabled under your Badrap user account to get started. The app fetches a list of your organization's public IP addresses from your AWS installation with your consent, and adds those assets under your Badrap user account. Below, we describe the actions needed in Badrap. We also explain what you need to do in AWS to grant the minimum permissions for Badrap to fetch the public IP addresses.</p> <h2 id="install-the-aws-app-in-badrap"><a href="#install-the-aws-app-in-badrap" class="header-anchor">#</a> Install the AWS app in Badrap</h2> <ol><li>Open the <a href="https://badrap.io/apps/aws" target="_blank" rel="noopener noreferrer">AWS app page<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>.</li> <li>Install the app.</li> <li>Take note of the External ID value that the app has generated for you. You'll need this later.</li></ol> <p><img src="/assets/img/aws-external-id.a2a3be74.jpg" alt="External Id"></p> <h2 id="create-required-aws-role-policy"><a href="#create-required-aws-role-policy" class="header-anchor">#</a> Create Required AWS Role &amp; Policy</h2> <p>Setting up the Badrap app with Amazon Web Services requires configuring role delegation using AWS IAM.</p> <ol><li><p>Create a new role in the <a href="https://console.aws.amazon.com/iam/home#/roles" target="_blank" rel="noopener noreferrer">AWS IAM console.<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p></li> <li><p>Select <code>Another AWS account</code> for the role type.</p></li> <li><p>Enter <code>808384617942</code> (Badrap's Account ID) as the <code>Account ID</code>.
<img src="/assets/img/aws-another-aws-account.827e6c8e.jpg" alt="Another AWS Acocount"></p></li> <li><p>Check the <code>Require external ID</code> option, and enter the External ID that the app generated for you earlier as the <code>External ID</code>.</p></li> <li><p>Leave the <code>Require MFA</code> option unchecked.</p></li> <li><p>Click <code>Next: Permissions</code>.
<img src="/assets/img/aws-external-id2.86d140cc.jpg" alt="External Id"></p></li> <li><p>If you've already created a policy, skip the following substeps. Otherwise click <code>Create Policy</code>, which opens a new window.
<img src="/assets/img/aws-create-policy.ee511b2e.jpg" alt="Create Policy"></p> <ol><li>Select the <code>JSON</code> tab and enter the following policy snippet into the text box:</li></ol> <div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">&quot;Version&quot;</span><span class="token operator">:</span> <span class="token string">&quot;2012-10-17&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;Statement&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token punctuation">{</span>
      <span class="token property">&quot;Sid&quot;</span><span class="token operator">:</span> <span class="token string">&quot;VisualEditor0&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;Effect&quot;</span><span class="token operator">:</span> <span class="token string">&quot;Allow&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;Action&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
        <span class="token string">&quot;ec2:DescribeInstances&quot;</span><span class="token punctuation">,</span>
        <span class="token string">&quot;lightsail:GetInstances&quot;</span><span class="token punctuation">,</span>
        <span class="token string">&quot;route53:GetHostedZone&quot;</span><span class="token punctuation">,</span>
        <span class="token string">&quot;route53:ListHostedZones&quot;</span><span class="token punctuation">,</span>
        <span class="token string">&quot;route53:ListResourceRecordSets&quot;</span><span class="token punctuation">,</span>
        <span class="token string">&quot;route53domains:ListDomains&quot;</span>
      <span class="token punctuation">]</span><span class="token punctuation">,</span>
      <span class="token property">&quot;Resource&quot;</span><span class="token operator">:</span> <span class="token string">&quot;*&quot;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre></div><ol start="2"><li>Click <code>Review policy</code>.</li> <li>Name the policy (e.g., <code>BadrapAppPolicy</code>).</li> <li>Click <code>Create policy</code></li> <li>Return to the <code>Create role</code> window.</li> <li>Refresh the list of policies</li></ol></li> <li><p>Select the BadrapAppPolicy
<img src="/assets/img/aws-return.e83912f5.jpg" alt="Create Policy"></p></li> <li><p>Click <code>Next: Tags</code>.</p></li> <li><p>Click <code>Next: Review</code>.</p></li> <li><p>Name the role (e.g., <code>BadrapAppRole</code>).</p></li> <li><p>Click <code>Create role</code>.</p></li></ol> <h2 id="finish-the-installation"><a href="#finish-the-installation" class="header-anchor">#</a> Finish the Installation</h2> <ol><li>Return to the <a href="https://badrap.io/apps/aws" target="_blank" rel="noopener noreferrer">AWS app page<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>.</li> <li>Enter your <a href="https://console.aws.amazon.com/billing/home?#/account" target="_blank" rel="noopener noreferrer">AWS Account ID<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> into the <code>Account ID</code> field.</li> <li>Enter the name of the AWS role you created earlier. <strong>Note that the role name is case sensitive!</strong></li> <li>Click <code>Add</code>.</li></ol> <h2 id="uninstalling-the-app"><a href="#uninstalling-the-app" class="header-anchor">#</a> Uninstalling the app</h2> <p>If you want to stop using the Badrap AWS app, you can uninstall it from your Badrap <a href="https://badrap.io/apps/aws" target="_blank" rel="noopener noreferrer">AWS app page<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>.</p> <p>Then you can clean up the app role and policy definitions from your <a href="https://console.aws.amazon.com/iam/home#/roles" target="_blank" rel="noopener noreferrer">AWS IAM console<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>.</p> <ol><li>Under the <a href="https://console.aws.amazon.com/iam/home#/roles" target="_blank" rel="noopener noreferrer">Roles<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> section, search for the role you created earlier (e.g. &quot;BadrapTestAppRole&quot;) and select <strong>Delete</strong>.</li></ol> <div style="text-align:center;"><img src="/assets/img/aws-90-delete-role.494128c6.png" style="max-width:95%;width:480px;"></div> <ol start="2"><li>Under the <a href="https://console.aws.amazon.com/iam/home#/policies" target="_blank" rel="noopener noreferrer">Policies<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> section, search for the policy you created and connected to the role (e.g. &quot;BadrapTestAppPolicy&quot;), and from the <strong>Policy actions</strong> drop-down menu select <strong>Delete</strong>.</li></ol> <div style="text-align:center;"><img src="/assets/img/aws-92-delete-policy.35fefe2b.png" style="max-width:95%;width:480px;"></div> <p>That's it, you have successfully uninstalled the Badrap AWS app and cleaned up its configuration from your AWS installation.</p></div> <footer class="page-edit"><div class="edit-link"><a href="https://github.com/badrap/docs.badrap.io/edit/main/docs/apps/aws.md" target="_blank" rel="noopener noreferrer">Edit this page on GitHub</a> <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></div> <!----></footer> <!----> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.c82b7a3e.js" defer></script><script src="/assets/js/2.05df0036.js" defer></script><script src="/assets/js/5.8ff03dbc.js" defer></script>
  </body>
</html>
