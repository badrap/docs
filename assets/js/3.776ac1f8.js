(window.webpackJsonp=window.webpackJsonp||[]).push([[3],{323:function(t,e,a){t.exports=a.p+"assets/img/azure-30-add-account.e0af29c2.png"},324:function(t,e,a){t.exports=a.p+"assets/img/azure-99-assets.8ce8c83b.png"},358:function(t,e,a){t.exports=a.p+"assets/img/azure-10-install.63f89a36.png"},359:function(t,e,a){t.exports=a.p+"assets/img/azure-20-consent.6525f3a0.png"},360:function(t,e,a){t.exports=a.p+"assets/img/azure-50-portal.35629939.png"},361:function(t,e,a){t.exports=a.p+"assets/img/azure-54-appreg.b1377e84.png"},362:function(t,e,a){t.exports=a.p+"assets/img/azure-58-newreg.d2fb7a62.png"},363:function(t,e,a){t.exports=a.p+"assets/img/azure-60-search-subs.19757f85.png"},364:function(t,e,a){t.exports=a.p+"assets/img/azure-64-choose-sub.418f84e6.png"},365:function(t,e,a){t.exports=a.p+"assets/img/azure-68-iam.0885de29.png"},366:function(t,e,a){t.exports=a.p+"assets/img/azure-70-add-role.f46f98f9.png"},367:function(t,e,a){t.exports=a.p+"assets/img/azure-74-role-details.a22bcbe7.png"},368:function(t,e,a){t.exports=a.p+"assets/img/azure-78-select-app.5fe5a4ae.png"},369:function(t,e,a){t.exports=a.p+"assets/img/azure-80-copy-values.bc0d43aa.png"},370:function(t,e,a){t.exports=a.p+"assets/img/azure-84-client-secret.767757b9.png"},388:function(t,e,a){"use strict";a.r(e);var s=a(42),r=Object(s.a)({},(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("h1",{attrs:{id:"microsoft-azure"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#microsoft-azure"}},[t._v("#")]),t._v(" Microsoft Azure")]),t._v(" "),s("p",[t._v("This app allows you to synchronize your Microsoft Azure assets into Badrap and receive security notifications about them. The app fetches a list of your organization's public IP addresses from your Azure installation with your consent, and adds those assets under your Badrap user account.")]),t._v(" "),s("h2",{attrs:{id:"install-the-azure-app-in-badrap"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#install-the-azure-app-in-badrap"}},[t._v("#")]),t._v(" Install the Azure app in Badrap")]),t._v(" "),s("p",[t._v("Anyone can install the Azure app in Badrap, but you will need Global Administrator, Application Administrator or Cloud Application Administrator level privileges to enable the app to access your Azure installation and to list your assets from there. If you do not have administrator role privileges, refer your administrator to these instructions and ask them to help you with the app configuration.")]),t._v(" "),s("ol",[s("li",[t._v("Open the "),s("a",{attrs:{href:"https://badrap.io/apps/azure",target:"_blank",rel:"noopener noreferrer"}},[t._v("Azure app page"),s("OutboundLink")],1),t._v(".")])]),t._v(" "),s("div",{staticStyle:{"text-align":"center"}},[s("img",{staticStyle:{"max-width":"95%",width:"480px"},attrs:{src:a(358)}})]),t._v(" "),s("ol",{attrs:{start:"2"}},[s("li",[t._v("The app asks for your consent to create & manage new assets. Click "),s("strong",[t._v("Install the app")]),t._v(".")])]),t._v(" "),s("div",{staticStyle:{"text-align":"center"}},[s("img",{staticStyle:{"max-width":"95%",width:"480px"},attrs:{src:a(359)}})]),t._v(" "),s("p",[t._v("The Azure app is now installed. Next, you have to create a service principal for the app in your Azure installation, and to provide its configuration details to the app settings. You can do this either by using the Azure CLI (incredibly easy) or your Azure Portal (still easy).")]),t._v(" "),s("h2",{attrs:{id:"using-the-azure-cli"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#using-the-azure-cli"}},[t._v("#")]),t._v(" Using the Azure CLI")]),t._v(" "),s("p",[t._v("Note that installing Azure CLI to your computer is outside of the scope of this guide. You can use "),s("a",{attrs:{href:"https://docs.microsoft.com/en-us/cli/azure/install-azure-cli",target:"_blank",rel:"noopener noreferrer"}},[t._v("Microsoft's Azure CLI installation instructions"),s("OutboundLink")],1),t._v(" to get started if you haven't installed it previously.")]),t._v(" "),s("ol",[s("li",[t._v("Log into Azure using your Azure CLI utility.")])]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("az login\n")])])]),s("ol",{attrs:{start:"2"}},[s("li",[t._v("List your subscription details:")])]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("az account show\n")])])]),s("p",[t._v("The listing will look like this:")]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v('{\n  "environmentName": "AzureCloud",\n  "homeTenantId": "aaaaaaaa-bbbb-cccc-dddd-eeeeeeeeeeee",\n  "id": "11111111-2222-3333-4444-555555666666",\n  "isDefault": true,\n  "managedByTenants": [],\n  "name": "Pay-As-You-Go",\n  "state": "Enabled",\n  "tenantId": "aaaaaaaa-bbbb-cccc-dddd-eeeeeeeeeeee",\n  "user": {\n    "name": "adminroleuser@example.com",\n    "type": "user"\n  }\n}\n')])])]),s("p",[t._v("Make a note of the "),s("strong",[t._v("id")]),t._v(" field value (subscription ID) for the next step.")]),t._v(" "),s("ol",{attrs:{start:"3"}},[s("li",[t._v("Use the "),s("code",[t._v("az ad sp")]),t._v(" command to create an application as a service principal with Reader role privileges. Substitute "),s("code",[t._v("{subscription_id}")]),t._v(" in the example below with the "),s("strong",[t._v("id")]),t._v(" value you noted down previously. Note that the "),s("code",[t._v("--name")]),t._v(" parameter is optional and you can define any name you want for the service principal.")])]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v('az ad sp create-for-rbac --role "Reader" --scopes /subscriptions/{subscription_id} --name http://BadrapAzureApp\n')])])]),s("p",[t._v("The output will look like this:")]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v('Creating \'Reader\' role assignment under scope \'/subscriptions/11111111-2222-3333-4444-555555666666\'\n  Retrying role assignment creation: 1/36\nThe output includes credentials that you must protect. Be sure that you do not include these credentials in your code or\ncheck the credentials into your source control. For more information, see https://aka.ms/azadsp-cli\n{\n  "appId": "aabbccdd-1122-3344-5566-eeeeffff7777",\n  "displayName": "BadrapAzureApp",\n  "name": "http://BadrapAzureApp",\n  "password": "****************************",\n  "tenant": "aaaaaaaa-bbbb-cccc-dddd-eeeeeeeeeeee"\n}\n')])])]),s("ol",{attrs:{start:"4"}},[s("li",[t._v("Under your Badrap Azure app settings, add your account details.")])]),t._v(" "),s("div",{staticStyle:{"text-align":"center"}},[s("img",{staticStyle:{"max-width":"95%",width:"480px"},attrs:{src:a(323)}})]),t._v(" "),s("ol",{attrs:{start:"5"}},[s("li",[t._v("Copy the "),s("strong",[t._v("tenant")]),t._v(", "),s("strong",[t._v("appId")]),t._v(" and "),s("strong",[t._v("password")]),t._v(" values into the app settings:")])]),t._v(" "),s("ul",[s("li",[t._v("Tenant ID: "),s("code",[t._v("tenant")])]),t._v(" "),s("li",[t._v("Application ID: "),s("code",[t._v("appId")])]),t._v(" "),s("li",[t._v("Client Secret: "),s("code",[t._v("password")])])]),t._v(" "),s("ol",{attrs:{start:"6"}},[s("li",[t._v("In a few minutes after the Badrap Azure app has been configured into use, you should see a listing of your Azure assets under "),s("a",{attrs:{href:"https://badrap.io/assets",target:"_blank",rel:"noopener noreferrer"}},[t._v("My Assets"),s("OutboundLink")],1),t._v(".")])]),t._v(" "),s("div",{staticStyle:{"text-align":"center"}},[s("img",{staticStyle:{"max-width":"95%",width:"480px"},attrs:{src:a(324)}})]),t._v(" "),s("ol",{attrs:{start:"7"}},[s("li",[t._v("If you want to stop using the Badrap Azure app, you can delete the service principal with the "),s("code",[t._v("az ad sp delete")]),t._v(" command:")])]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("az ad sp delete --id http://BadrapAzureApp\n")])])]),s("p",[t._v("The output of the command should be like this:")]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("Removing role assignments\n")])])]),s("p",[t._v("Then uninstall the Azure app from your Badrap settings page.")]),t._v(" "),s("h2",{attrs:{id:"using-azure-portal"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#using-azure-portal"}},[t._v("#")]),t._v(" Using Azure Portal")]),t._v(" "),s("ol",[s("li",[t._v("Log into your "),s("a",{attrs:{href:"https://portal.azure.com",target:"_blank",rel:"noopener noreferrer"}},[t._v("Azure Portal"),s("OutboundLink")],1),t._v(". Select Azure Active Directory from the sidebar.")])]),t._v(" "),s("div",{staticStyle:{"text-align":"center"}},[s("img",{staticStyle:{"max-width":"95%",width:"480px"},attrs:{src:a(360)}})]),t._v(" "),s("ol",{attrs:{start:"2"}},[s("li",[t._v("Go to "),s("strong",[t._v("App Registrations")]),t._v(".")])]),t._v(" "),s("div",{staticStyle:{"text-align":"center"}},[s("img",{staticStyle:{"max-width":"95%",width:"480px"},attrs:{src:a(361)}})]),t._v(" "),s("ol",{attrs:{start:"3"}},[s("li",[t._v("Click "),s("strong",[t._v("New registration")]),t._v(". Enter the following details:")])]),t._v(" "),s("ul",[s("li",[t._v("Name: Badrap Azure App")]),t._v(" "),s("li",[t._v("Supported Account Types: Accounts in this organizational directory only (your organization only)")]),t._v(" "),s("li",[t._v("Redirect URI (optional): leave blank")])]),t._v(" "),s("div",{staticStyle:{"text-align":"center"}},[s("img",{staticStyle:{"max-width":"95%",width:"480px"},attrs:{src:a(362)}})]),t._v(" "),s("ol",{attrs:{start:"4"}},[s("li",[s("p",[t._v("Click "),s("strong",[t._v("Register")]),t._v(" to complete the new app registration.")])]),t._v(" "),s("li",[s("p",[t._v("Now, give Reader permissions to the application. Go to "),s("strong",[t._v("Subscriptions")]),t._v(" via the Azure Portal top search bar or via the left sidebar.")])])]),t._v(" "),s("div",{staticStyle:{"text-align":"center"}},[s("img",{staticStyle:{"max-width":"95%",width:"480px"},attrs:{src:a(363)}})]),t._v(" "),s("ol",{attrs:{start:"6"}},[s("li",[t._v("Choose the subscription you want to use.")])]),t._v(" "),s("div",{staticStyle:{"text-align":"center"}},[s("img",{staticStyle:{"max-width":"95%",width:"480px"},attrs:{src:a(364)}})]),t._v(" "),s("ol",{attrs:{start:"7"}},[s("li",[t._v("Select "),s("strong",[t._v("Access Control (IAM)")]),t._v(" in the subscription page.")])]),t._v(" "),s("div",{staticStyle:{"text-align":"center"}},[s("img",{staticStyle:{"max-width":"95%",width:"480px"},attrs:{src:a(365)}})]),t._v(" "),s("ol",{attrs:{start:"8"}},[s("li",[t._v("Click "),s("strong",[t._v("Add")]),t._v(" and select "),s("strong",[t._v("Add role assignment")]),t._v(".")])]),t._v(" "),s("div",{staticStyle:{"text-align":"center"}},[s("img",{staticStyle:{"max-width":"95%",width:"480px"},attrs:{src:a(366)}})]),t._v(" "),s("ol",{attrs:{start:"9"}},[s("li",[s("p",[t._v('For "Role", select '),s("strong",[t._v("Reader")]),t._v('. For "Assign access to", select '),s("strong",[t._v("User, group or service principal")]),t._v(".")])]),t._v(" "),s("li",[s("p",[t._v('In the Select menu, type the name of the application you created in the previous step (e.g. "Badrap Azure App") and click on the search result. The app should now appear in the "Selected members" list. Then click '),s("strong",[t._v("Save")]),t._v(".")])])]),t._v(" "),s("div",{staticStyle:{"text-align":"center"}},[s("img",{staticStyle:{"max-width":"95%",width:"480px"},attrs:{src:a(367)}})]),t._v(" "),s("ol",{attrs:{start:"11"}},[s("li",[t._v("Under "),s("strong",[t._v("App Registrations")]),t._v(", select the application you created.")])]),t._v(" "),s("div",{staticStyle:{"text-align":"center"}},[s("img",{staticStyle:{"max-width":"95%",width:"480px"},attrs:{src:a(368)}})]),t._v(" "),s("ol",{attrs:{start:"12"}},[s("li",[t._v("Note down the "),s("strong",[t._v("Directory (tenant) ID")]),t._v(" and "),s("strong",[t._v("Application (client) ID")]),t._v(" values.")])]),t._v(" "),s("div",{staticStyle:{"text-align":"center"}},[s("img",{staticStyle:{"max-width":"95%",width:"480px"},attrs:{src:a(369)}})]),t._v(" "),s("ol",{attrs:{start:"13"}},[s("li",[s("p",[t._v("Under the same app, select "),s("strong",[t._v("Certificates and Secrets")]),t._v(" in the Manage menu.")])]),t._v(" "),s("li",[s("p",[t._v('Under "Client secrets", click on '),s("strong",[t._v("New Client Secret")]),t._v(".")])]),t._v(" "),s("li",[s("p",[t._v("For the description field, you can use e.g. "),s("code",[t._v("badrapClientSecret")]),t._v(". Select a suitable time for expiration (e.g. one year), and click "),s("strong",[t._v("Add")]),t._v(".")])]),t._v(" "),s("li",[s("p",[t._v("Note down the "),s("strong",[t._v("Value")]),t._v(" field from the generated client secret.")])])]),t._v(" "),s("div",{staticStyle:{"text-align":"center"}},[s("img",{staticStyle:{"max-width":"95%",width:"480px"},attrs:{src:a(370)}})]),t._v(" "),s("ol",{attrs:{start:"17"}},[s("li",[t._v("Under your Badrap Azure app settings, add a new account. Copy the "),s("strong",[t._v("Directory (tenant) ID")]),t._v(", "),s("strong",[t._v("Application (client) ID")]),t._v(" and "),s("strong",[t._v("client secret")]),t._v(" values you noted down earlier into the Badrap Azure app settings.")])]),t._v(" "),s("div",{staticStyle:{"text-align":"center"}},[s("img",{staticStyle:{"max-width":"95%",width:"480px"},attrs:{src:a(323)}})]),t._v(" "),s("ol",{attrs:{start:"18"}},[s("li",[s("p",[t._v("Click "),s("strong",[t._v("Add account")]),t._v(" to save your settings.")])]),t._v(" "),s("li",[s("p",[t._v("In a few minutes after the app has been configured into use, you should see a listing of your Azure assets under "),s("a",{attrs:{href:"https://badrap.io/assets",target:"_blank",rel:"noopener noreferrer"}},[t._v("My Assets"),s("OutboundLink")],1),t._v(".")])])]),t._v(" "),s("div",{staticStyle:{"text-align":"center"}},[s("img",{staticStyle:{"max-width":"95%",width:"480px"},attrs:{src:a(324)}})])])}),[],!1,null,null,null);e.default=r.exports}}]);